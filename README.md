### Технические директивы

Все команды описанные в документации и запускаемые в консоли выполняются от корня проекта

**Стенд** - Сервер на котором работает приложение (vps, docker, etc...)

### Структура проекта

    /api            документация на api приложения (link: host:port/api/docs/index.html)
    /static         статичные данные проекта (выкладываются на сервер)
    /cmd            дополнительные служебные точки входа в приложения (main, golang)
    /data           служебные данные для ведения проекта
    /docs           всевозможная документация на проект
    /internal       код проекта (golang)
        /config     конфигурация проекта
        /handlers   контроллеры обработчики запросов
        /model      модели реализующие бизнес логику приложения
        /workers    Фоновые задачи приложения
        ...         возможно какие-то дополнительные функциональные пакеты
    /migrations     папка миграций БД проекта
    /pkg            вспомогательный модульный код проекта (golang)

### Структура репозитория и деплой
Ветки

	master  бой
	stage   релиз кандидат
	dev     разработка

Регламент деплоя:

<pre>
Бой
http://domain.ru/
Выкладывается по обнаружению нового тега без префиксов

Релиз кандидат
http://stage.domain.ru/
Выкладывается по обнаружению нового тега с префиксом

Разработка
http://dev.domain.ru/
Выкладывается по обнаружению пуша в ветку dev и из ветки dev
</pre>

### Разработка
Для запуска приложения в различных режимах используются флаги, разные конфиги и как вариант автоматизации "Makefile.Sample".
Он может быть скопирован и переименован для использования в "Makefile" (добавлен в .gitignore)

Для выполнения задачи создается ветка от ветки dev.
Имя ветки это номер задачи. Ветка пробрасывается на origin и связывается с ней
В ней ведется работа над задачей. Создаются миграции. Пишутся тесты и т.д.
В процессе работы коммитим, пушим в репозиторий.
После заверешния работы возвращаемся на dev.
Забираем измнения сделанные за время работы над задчей в ветке dev.
Возвращаемся обратно в ветку с задачей. Делаем merge с dev.
Решаем конфликты если они появляются. Пушим законченную задачу на сервер. Формируем request.

    git checkout -b 234
    git push --set-upstream origin 234
    ...its work
    git add .
    git commit -am "comment"
    git push
    ...
    git checkout -b dev
    git pull
    git checkout 234
    git merge dev
    ...conflict resolve if exists
    Важно: если есть миграция БД она должна быть самой последней. И стоять после всех полученных миграций от дургих разработчиков!
    git push

Создаем merge request

---
[Работа с БД](docs/database.md "Работа с БД")

[Документирование api](docs/docapi.md "Документирование api")

[Лнтеры (linter)](docs/linters.md "Лнтеры (linter)")
